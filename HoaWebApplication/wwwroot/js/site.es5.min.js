"use strict";$(function(){function r(n){var t=Swal.mixin({toast:!0,position:"top-right",showConfirmButton:!1,timer:6e3});t.fire({type:"success",title:""+n})}var e=$("#user-created"),n,t,u,f;if(e.length!==0&&Swal.fire({title:'<div class="text-primary">Account Created<\/div>',type:"success",html:'Your account has been created. The admin will assign your role as soon as possible. If you have questions or problems, please send the  admin an email through the <strong class="font-weight-bold">Contact Admin<\/strong> link.',showCloseButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"}),n=$("#userregistered"),n.length!==0&&Swal.fire({title:'<div class="text-primary">Confirm Email<\/div>',type:"success",html:"Thank you for registering. You will need to confirm your email before logging in. Please check your email  for a confirmation email.",showCloseButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"}),n=$("#forgotpassword"),n.length!==0&&Swal.fire({title:'<div class="text-primary">Forgot Password<\/div>',type:"success",html:"An email has been sent with a link to reset your password.",showCloseButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"}),n=$("#passwordreset"),n.length!==0&&Swal.fire({title:'<div class="text-primary">Password Reset<\/div>',type:"success",html:"Your password has been successfully reset. Please log in with your new password.",showCloseButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"}),t=$("#timer-id"),t.length!==0)var i=$(".timer-body"),o=new Date(t.attr("data-time")).getTime(),s=setInterval(function(){var t=(new Date).getTime(),n=o-t,r=Math.floor(n/864e5),u=Math.floor(n%864e5/36e5),f=Math.floor(n%36e5/6e4),e=Math.floor(n%6e4/1e3);i.text(r+"d "+u+"h "+f+"m "+e+"s ");n<0&&(clearInterval(s),i.text(""),$("#timer-card").hide())},1e3);else $("#timer-card").hide();$(document).on("click","#customFile",function(){this.value=null});$(document).on("change","#customFile",function(){var n=$(this).val(),t=n.replace("C:\\fakepath\\"," ");$(".custom-file-label").html(t)});$('a[data-modal="delete-modal"]').click(function(){var n="",t,i;n=$(this).attr("data-deleteRelated")==="true"?$(".deleteRelatedItem"):$(".deleteItem");t=$(this).attr("data-id");n.find("#deleteId").attr("value",t);i=$(this).attr("data-parentId");n.find("#deleteParentId").attr("value",i);Swal.fire({title:"Are you sure?",type:"warning",html:""+n.html(),showCloseButton:!0,showCancelButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-danger create-edit-delete",confirmButtonText:"Yes",cancelButtonClass:"btn btn-primary",reverseButtons:!0,allowOutsideClick:function(){return!Swal.isLoading()}}).then(function(n){if(n.value){Swal.showLoading();var t=$(".swal2-content").find("form"),i=t.attr("action"),r=t.serialize();$.post(i,r).done(function(n){n==="Success"?Swal.fire("Deleted!","The item was deleted successfully","success").then(function(){var n=window.location.href;window.location=n}):Swal.fire("Error","An error occured. Please try again later","error")})}})});$(".page-size-control").change(function(){var n=window.location.href.split("/"),t;n.length<=5?(t=n[3],window.location="/"+t+"/1?pageSize="+$(".page-size-control").val()):window.location="/"+n[3]+"/"+n[4]+"/"+n[5]+"/1?pageSize="+$(".page-size-control").val()});u=sessionStorage.getItem("itemModified");u&&(sessionStorage.removeItem("itemModified"),r("Your changes were saved successfully."));f=sessionStorage.getItem("boardemail");f&&(sessionStorage.removeItem("boardemail"),r("Your email was sent successfully."));$('button[data-modal="create-edit-modal"], a[data-modal="create-edit-modal"]').click(function(){var n=$(this).data("url");$.get(n).done(function(n){Swal.fire({title:$(this).data("title"),html:""+n,showCloseButton:!0,showCancelButton:!0,buttonsStyling:!1,confirmButtonClass:"btn btn-dark text-light create-edit-delete",confirmButtonText:"Submit",cancelButtonClass:"btn btn-danger",reverseButtons:!0,allowOutsideClick:function(){return!Swal.isLoading()}});var t=$("#text-area-content").val();$("#datetimepicker1").datetimepicker({defaultDate:moment(),minDate:moment().subtract(5,"m")});$.validator.setDefaults({ignore:""});$.validator.unobtrusive.parse(".vn");tinyMCE.remove();tinymce.init({selector:"#tinymcetextarea",plugins:"lists,link",invalid_elements:"script,object,embed,link,style,form,input,iframe",init_instance_callback:function(){tinyMCE.activeEditor.setContent(""+t)}});$(".create-edit-delete").replaceWith($(".create-edit-delete").clone())})});$(document).on("click",".create-edit-delete",function(n){var i,t,r,u;n.preventDefault();i=$(".swal2-confirm");i.attr("disabled","disabled");Swal.showLoading();tinyMCE.triggerSave();t=$(".swal2-content").find("form");t.validate();t.valid()?(r=t.attr("action"),tinyMCE.triggerSave(),u=new FormData(t.get(0)),$.ajax({url:r,method:"post",data:u,processData:!1,contentType:!1}).done(function(n){var r,u,f,e;if(t.replaceWith(n),t=$(".swal2-content").find("form"),$.validator.setDefaults({ignore:""}),$.validator.unobtrusive.parse(".vn"),r=t.find('[name="IsValid"]'),u=r.val()=="True",r.length===0||t.length===0){Swal.hideLoading();return}u?(f=t.find(".contact-board"),f.length!==0?sessionStorage.setItem("boardemail","true"):sessionStorage.setItem("itemModified","true"),e=window.location.href,window.location=e):(Swal.hideLoading(),i.removeAttr("disabled","disabled"),$("#datetimepicker1").datetimepicker({defaultDate:moment(),minDate:moment().subtract(5,"m")}),tinyMCE.remove(),tinymce.init({selector:"#tinymcetextarea",invalid_elements:"script,object,embed,link,style,form,input,iframe",plugins:"lists,link"}))})):(Swal.hideLoading(),i.removeAttr("disabled","disabled"))})});